# 大端小端

## 1. 大小端是啥

> 大端存储模式：数据的低位保存在内存的高地址中，数据的高位，保存在内存的低地址中。

> 小端存储模式：数据的低位保存在内存的低地址中，数据的高位，保存在内存的高地址中。

总结：大大大，小小小(忍不住1234567)。

## 2. 为什么会有大小端之分

举个例子：

30个人，问问他们吃煮鸡蛋是从大头砸还是从小头砸或者是中间，反转我们宿舍6个人不都一样。科学家们也一样，关于数据在内存里先存大的还是先存小的，也有争议。

**大端小端没有谁优谁劣，各自优势便是对方劣势：**

小端模式 ：强制转换数据不需要调整字节内容，1、2、4字节的存储方式一样。
大端模式 ：符号位的判定固定为第一个字节，容易判断正负。

> 在计算机系统中，我们是以字节为单位的，每个地址单元都对应着一个字节，一个字节为8bit。但是在C语言中除了8bit的char之外，还有16bit的short型，32bit的long型（要看具体的编译器），另外，对于位数大于8位的处理器，例如16位或者32位的处理器，由于寄存器宽度大于一个字节，那么必然存在着一个如果将多个字节安排的问题。因此就导致了大端存储模式和小端存储模式。例如一个16bit的short型x，在内存中的地址为0x0010，x的值为0x1122，那么0x11为高字节，0x22为低字节。对于大端模式，就将0x11放在低地址中，即0x0010中，0x22放在高地址中，即0x0011中。小端模式，刚好相反。我们常用的X86结构是小端模式，而KEIL C51则为大端模式。很多的ARM，DSP都为小端模式。有些ARM处理器还可以由硬件来选择是大端模式还是小端模式。

## 3. 如何看自己的电脑是大端小端

1. 定义一个变量`int a = 1234;`然后看这个变量在内存中的存储方式。

2. 百度2015年系统工程师笔试题：

   ```c
   #include <stdio.h>
   
   int check1()
   {
       int i = 1;
       return (*(char *)&i);
   }
   
   int check2()
   {
       union
       {
           int i;
           char c;
       }un;
       un.i = 1;
       return un.c;
   }
   
   int main()
   {
       if(check1())
       {
           printf("小端\n");
       }
       else
       {
           printf("大端\n");
       }
       return 0;
   }
   ```